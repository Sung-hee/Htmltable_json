<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <!-- <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script> -->
    <script src="./jquery.dataTables.js"></script>
    <script src="https://cdn.datatables.net/fixedcolumns/3.2.4/js/dataTables.fixedColumns.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/3.2.4/css/fixedColumns.dataTables.min.css">
    <link rel="stylesheet" href="./style.css">

  </head>
  <body style="width:100%; margin:0;">
    <div class="container" style="width:100%; height:100%">
      <div class="table-responsive">
        <table class="table" id="stock_table" width="100%; height:100%; margin:0">
          <thead>
            <tr>
              <th scope="col">종목명</th>
              <th scope="col">황금알점수</th>
              <th scope="col">파워등급</th>
              <th scope="col">수급등급</th>
              <th scope="col">실적등급</th>
              <th scope="col">현재가치</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
  </body>
</html>

<script>
  $(document).ready(function(){
    $.getJSON('https://charttest-sungheeek.c9users.io/stock_table.json', function(data){
      var json_data = '';
      json_data += '<tbody>'
      $.each(data, function(key, value){
        json_data += '<tr>';
        json_data += '<td>'+value.companycode+'</td>';
        if(value.goldagg == "매우우수" || value.goldagg == "우수"){
          json_data += '<td style="color:red">'+value.goldagg+'</td>';
        }
        else if(value.goldagg == "평범"){
          json_data += '<td>'+value.goldagg+'</td>';
        }
        else {
          json_data += '<td style="color:blue">'+value.goldagg+'</td>';
        }

        if(value.powerrating == "매우우수" || value.powerrating == "우수"){
          json_data += '<td style="color:red">'+value.powerrating+'</td>';
        }
        else if(value.powerrating == "평범"){
          json_data += '<td>'+value.powerrating+'</td>';
        }
        else {
          json_data += '<td style="color:blue">'+value.powerrating+'</td>';
        }

        if(value.demandrating == "매우우수" || value.demandrating == "우수"){
          json_data += '<td style="color:red">'+value.demandrating+'</td>';
        }
        else if(value.demandrating == "평범"){
          json_data += '<td>'+value.demandrating+'</td>';
        }
        else {
          json_data += '<td style="color:blue">'+value.demandrating+'</td>';
        }

        if(value.performancegrade == "매우우수" || value.performancegrade == "우수"){
          json_data += '<td style="color:red">'+value.performancegrade+'</td>';
        }
        else if(value.performancegrade == "평범"){
          json_data += '<td>'+value.performancegrade+'</td>';
        }
        else {
          json_data += '<td style="color:blue">'+value.performancegrade+'</td>';
        }

        if(value.currentvalue == "매우우수" || value.currentvalue == "우수"){
          json_data += '<td style="color:red">'+value.performancegrade+'</td>';
        }
        else if(value.currentvalue == "평범"){
          json_data += '<td>'+value.currentvalue+'</td>';
        }
        else {
          json_data += '<td style="color:blue">'+value.currentvalue+'</td>';
        }
        json_data += '</tr>';
      });
      json_data += '</tbody>'
      $('#stock_table').append(json_data);
      $('#stock_table').DataTable( {
        "paging": false,
        "scrollY": 700,
        "scrollX": true,
        "scrollCollapse": true,
        "columnDefs": [
            { width: '15%', targets: 0 }
        ],
        "fixedColumns": true,
        "bInfo" : false,
         // "sinfo": false,
         "bFilter": false
      } );
    });
  });
</script>
